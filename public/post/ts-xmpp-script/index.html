<!DOCTYPE html>
<html class="no-js">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>TeamSpeak XMPP Push  &middot; Magic Broccoli</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="" />

<meta name="keywords" content="TeamSpeak Script, ">


<meta property="og:title" content="TeamSpeak XMPP Push  &middot; Magic Broccoli ">
<meta property="og:site_name" content="Magic Broccoli"/>
<meta property="og:url" content="https://magicbroccoli.de/post/ts-xmpp-script/" />
<meta property="og:locale" content="de-DE">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="2017-06-22T14:15:25&#43;02:00" />
<meta property="og:article:modified_time" content="2017-06-22T14:15:25&#43;02:00" />

  
    
<meta property="og:article:tag" content="TeamSpeak Script">
    
  

  
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@" />
<meta name="twitter:title" content="TeamSpeak XMPP Push" />
<meta name="twitter:description" content="" />
<meta name="twitter:url" content="https://magicbroccoli.de/post/ts-xmpp-script/" />
<meta name="twitter:domain" content="https://magicbroccoli.de/">
  

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "TeamSpeak XMPP Push",
    "author": {
      "@type": "Person",
      "name": "http://profiles.google.com/+?rel=author"
    },
    "datePublished": "2017-06-22",
    "description": "",
    "wordCount": 336
  }
</script>



<link rel="canonical" href="https://magicbroccoli.de/post/ts-xmpp-script/" />

<meta name="generator" content="Hugo 0.27.1" />


  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">

  <link rel="stylesheet" href="https://magicbroccoli.de/assets/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://magicbroccoli.de/assets/css/style.css">
  <link rel="stylesheet" href="https://magicbroccoli.de/assets/css/tomorrow-night.css">
  <link href='//fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
  <link rel="apple-touch-icon" sizes="57x57" href="https://magicbroccoli.de/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://magicbroccoli.de/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://magicbroccoli.de/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://magicbroccoli.de/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://magicbroccoli.de/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://magicbroccoli.de/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://magicbroccoli.de/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://magicbroccoli.de/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://magicbroccoli.de/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="https://magicbroccoli.de/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://magicbroccoli.de/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://magicbroccoli.de/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://magicbroccoli.de/favicon/favicon-16x16.png">
<link rel="manifest" href="https://magicbroccoli.de/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
</head>

<body class="bg-light">
  <nav class="navbar navbar-expand-md navbar-light blog-header">
  <div class="container">
    <button class="navbar-toggler" type="button" data-toggle="collapse"
        data-target="#exCollapsingNavbar2"
        aria-controls="exCollapsingNavbar2" aria-expanded="false" aria-label="Toggle navigation">
      &#9776;
    </button>
    <div class="collapse navbar-collapse" id="exCollapsingNavbar2">
      <a class="navbar-brand" href="https://magicbroccoli.de/">Magic Broccoli</a>
      <ul class="nav navbar-nav">
        
        
          <li class="nav-item">
          <a class="nav-link menu-item" href="https://magicbroccoli.de/">
              <i class='fa fa-home fa-fw'></i>
              <span>Home</span>
          </a>
        </li>
        
          <li class="nav-item">
          <a class="nav-link menu-item" href="https://magicbroccoli.de/xmpp/">
              <i class='fa fa-delicious'></i>
              <span>XMPP</span>
          </a>
        </li>
        
          <li class="nav-item">
          <a class="nav-link menu-item" href="https://magicbroccoli.de/register/">
              <i class='fa fa-plus' fa-fw'></i>
              <span>Register</span>
          </a>
        </li>
        
          <li class="nav-item">
          <a class="nav-link menu-item" href="https://magicbroccoli.de/page/tutorial/">
              <i class='fa fa-question-circle' fa-fw'></i>
              <span>Tutorials</span>
          </a>
        </li>
        
          <li class="nav-item">
          <a class="nav-link menu-item" href="https://magicbroccoli.de/contact/">
              <i class='fa fa-info-circle'></i>
              <span>About me</span>
          </a>
        </li>
        
      </ul>
    </div>
  </div>
</nav>

<div class="container p-a-0">
  <div class="row m-l-0 m-r-0">
    <div class="col-xs-12 col-md-9 post-container">
      <div>
  

  <h1 class="post-title">TeamSpeak XMPP Push
</h1>

  <div class="post-meta">
  <div class="post-meta-item">
    <i class="fa fa-calendar"></i>
    <time datetime="2017-06-22">22 Jun, 2017</time>

    
      &middot; by nico
    
    &middot; 2 Minute Read
    &middot; 336 Words
  </div>

  
      
      
      <div class="post-meta-item">
          <i class="fa fa-folder-open-o"></i>
          
          <a class="article-category-link" href="https://magicbroccoli.de/categories/development/">Development</a>
          &middot;
          
          <a class="article-category-link" href="https://magicbroccoli.de/categories/bash/">Bash</a>
          &middot;
          
          <a class="article-category-link" href="https://magicbroccoli.de/categories/teamspeak/">TeamSpeak</a>
          &middot;
          
          <a class="article-category-link" href="https://magicbroccoli.de/categories/xmpp/">XMPP</a>
          
          
      </div>
      
  

  
      
      
        <div class="post-meta-item">
          <i class="fa fa-tags"></i>
          
          <a href="https://magicbroccoli.de/tags/xmpp/">XMPP</a>
          
          
        </div>
      
  
  

</div>

</div>

      <div class="content">
  

<h2 id="idee">Idee</h2>

<p>Die grundsätzliche Idee hinter diesem Skript ist, dass ein Admin/ Moderatoren nicht dauerhaft auf einem Server sein kann, um nach dem Rechten zu sehen.<br>
Für genau dieses Problem habe ich ein kleines Skript entwickelt, dass nach verschiedenen Regeln die Logfiles cyklisch durchsucht und gefundene Zeilen an definierte Kontakte per XMPP sendet.</p>

<h2 id="nutzen">Nutzen</h2>

<p><strong>IMHO</strong> gibt es genügend Beispiele, in denen eine schnellstmögliche Benachrichtigung schnellstmöglichst sehr praktisch ist.
Viele Server unterstützen eine Reihe von &ldquo;Automatischen Moderationen&rdquo;, trotzdem sollten User nicht in der Lage sein sich Gruppen zuzuweisen. Diese kurze Benachrichtigung sagt dem Admin/ Moderator, wer und welche Gruppe betroffen ist.<br>
Je nach Häufigkeit der Ausführung könnte die Benachrichtigung innerhalb von Sekunden gepushed werden.</p>

<pre><code>---- Group change ----
--- added ---
2017-05-12 18:56:38.609377|INFO    |VirtualServer |1  |client (id:USER A) was added to servergroup 'SERVERGROUP NAME'(id:SERVERGROUP ID) by client 'USERNAME'(id:USER B)
2017-05-12 22:09:01.658969|INFO    |VirtualServer |1  |client (id:USER ID) was added to servergroup 'SERVERGROUP NAME'(id:SERVERGROUP ID) by client 'USERNAME'(id:USER ID)
---- Group change End ----
</code></pre>

<h2 id="filter">Filter</h2>

<h4 id="server">Server</h4>

<ul>
<li>Accounting</li>
<li>ServerMain</li>
<li>Warning</li>
<li>ERROR</li>
</ul>

<h4 id="user-spezifisch">User spezifisch</h4>

<ul>
<li>Complaint</li>
<li>Kick</li>
<li>Ban ( added and deleted )</li>
<li>Group change</li>
</ul>

<h4 id="channel">Channel</h4>

<ul>
<li>creation</li>
<li>deletion</li>
<li>changed</li>
</ul>

<h2 id="github">Github</h2>

<p>Das Projekt ist gehostet auf <a href="https://github.com/mightyBroccoli/logwatch-scripts" target="_blank">Github</a>. Dort ist auch ein Bereich für <a href="https://github.com/mightyBroccoli/logwatch-scripts/issues" target="_blank">Github - Issues</a>, falls Probleme auftreten oder Verbesserungsvorschläge bestehen.</p>

<h2 id="debian-9">Debian 9</h2>

<p>Leider besteht mit Debian Stretch ein Problem mit perl wodurch <em>sendxmpp</em>, das xmpp cli Modul des Skripts nicht mehr funktioniert. Leider kann ich da im Moment erst mal nichts machen, aber ich repariere das Skipt für Debian Stretch, sobald es möglich ist.</p>

<hr />

<p>Update : 28.07.2017 Debian 9 Perl5 Problematik</p>

<pre><code>Use of uninitialized value in numeric eq (==) at /usr/share/perl5/XML/Stream.pm line 631.
</code></pre>

<p>Ich hab mit etwas debugging herausgefunden, welche Zeilen geändert werden müssen, um perl-xmlstream wieder zu fixxen.
Die Datei <code>/usr/share/perl5/XML/Stream.pm</code> müsste geändert werden. (Pfad kann abweichen je nach OS)
Mit nano lässt sich bequem nach der Zeile suchen, mit Shift + W. Danach ändert man Zeile 631.</p>

<pre><code>$self-&gt;{SIDS}-&gt;{default}-&gt;{ssl_ca_path} = '';
</code></pre>

<p>zu</p>

<pre><code>$self-&gt;{SIDS}-&gt;{default}-&gt;{ssl_ca_path} = '/etc/ssl/certs';
</code></pre>

<p>Nach dieser Änderung hat sich das Problem eingestellt und sendxmpp funktionierte wieder genauso tadellos wie zuvor.</p>

</div>

      <footer>
    
    
      
        <nav><ul class="pagination">
        
            <li class="page-item">
              <a href="https://magicbroccoli.de/post/first-post/" title="Magical  Server " class="page-link">
                <span aria-hidden="true">&larr;</span>Previous
              </a>
            </li>
        

        
          <li class="page-item">
            <a href="https://magicbroccoli.de/post/omemo-statement/" title="Wir unterstützen Omemo" class="page-link">
                Next <span aria-hidden="true">&rarr;</span>
            </a>
          </li>
        
        </ul> </nav>
      
    

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
    
  </div>
</footer>

    </div>
      <div class="col-xs-12 col-md-3">
        <div class="sidebar">
  

  


<div class="card card-block">
  <h4 class="card-title">CATEGORIES</h4>
  <div class="card-text">
    <div class="widget">
      <ul>
        
        <li class="category-list-item">
            <a href="https://magicbroccoli.de/categories/bash/">
                bash
            </a>
            <span class="category-list-count">1</span>
        </li>
        
        <li class="category-list-item">
            <a href="https://magicbroccoli.de/categories/chatsecure/">
                chatsecure
            </a>
            <span class="category-list-count">1</span>
        </li>
        
        <li class="category-list-item">
            <a href="https://magicbroccoli.de/categories/debian/">
                debian
            </a>
            <span class="category-list-count">2</span>
        </li>
        
        <li class="category-list-item">
            <a href="https://magicbroccoli.de/categories/development/">
                development
            </a>
            <span class="category-list-count">1</span>
        </li>
        
        <li class="category-list-item">
            <a href="https://magicbroccoli.de/categories/gajim/">
                gajim
            </a>
            <span class="category-list-count">1</span>
        </li>
        
        <li class="category-list-item">
            <a href="https://magicbroccoli.de/categories/mariadb/">
                mariadb
            </a>
            <span class="category-list-count">1</span>
        </li>
        
        <li class="category-list-item">
            <a href="https://magicbroccoli.de/categories/omemo/">
                omemo
            </a>
            <span class="category-list-count">1</span>
        </li>
        
        <li class="category-list-item">
            <a href="https://magicbroccoli.de/categories/prosody/">
                prosody
            </a>
            <span class="category-list-count">2</span>
        </li>
        
        <li class="category-list-item">
            <a href="https://magicbroccoli.de/categories/teamspeak/">
                teamspeak
            </a>
            <span class="category-list-count">1</span>
        </li>
        
        <li class="category-list-item">
            <a href="https://magicbroccoli.de/categories/xep-0368/">
                xep-0368
            </a>
            <span class="category-list-count">1</span>
        </li>
        
        <li class="category-list-item">
            <a href="https://magicbroccoli.de/categories/xmpp/">
                xmpp
            </a>
            <span class="category-list-count">5</span>
        </li>
        
      </ul>
    </div>
  </div>
</div>




  



<div class="card card-block">
  <h4 class="card-title">TAGS</h4>
  <div class="card-text">
    <div class="widget">
      <ul>
        
          <li>
            <a href="https://magicbroccoli.de/tags/ca-bundle/">ca-bundle</a>
            <span class="category-list-count">1</span>
          </li>
        
          <li>
            <a href="https://magicbroccoli.de/tags/ccc/">ccc</a>
            <span class="category-list-count">1</span>
          </li>
        
          <li>
            <a href="https://magicbroccoli.de/tags/cert-error/">cert-error</a>
            <span class="category-list-count">1</span>
          </li>
        
          <li>
            <a href="https://magicbroccoli.de/tags/guide/">guide</a>
            <span class="category-list-count">3</span>
          </li>
        
          <li>
            <a href="https://magicbroccoli.de/tags/mariadb/">mariadb</a>
            <span class="category-list-count">1</span>
          </li>
        
          <li>
            <a href="https://magicbroccoli.de/tags/omemo/">omemo</a>
            <span class="category-list-count">1</span>
          </li>
        
          <li>
            <a href="https://magicbroccoli.de/tags/prosody/">prosody</a>
            <span class="category-list-count">3</span>
          </li>
        
          <li>
            <a href="https://magicbroccoli.de/tags/xmpp/">xmpp</a>
            <span class="category-list-count">3</span>
          </li>
        
      </ul>
    </div>
  </div>
</div>




  


<div class="card card-block">
  <h4 class="card-title">TAG CLOUD</h4>
  <p class="card-text">
    
        <a href="https://magicbroccoli.de/tags/ca-bundle/" class="badge badge-primary">
        ca-bundle
        </a>
    
        <a href="https://magicbroccoli.de/tags/ccc/" class="badge badge-primary">
        ccc
        </a>
    
        <a href="https://magicbroccoli.de/tags/cert-error/" class="badge badge-primary">
        cert-error
        </a>
    
        <a href="https://magicbroccoli.de/tags/guide/" class="badge badge-primary">
        guide
        </a>
    
        <a href="https://magicbroccoli.de/tags/mariadb/" class="badge badge-primary">
        mariadb
        </a>
    
        <a href="https://magicbroccoli.de/tags/omemo/" class="badge badge-primary">
        omemo
        </a>
    
        <a href="https://magicbroccoli.de/tags/prosody/" class="badge badge-primary">
        prosody
        </a>
    
        <a href="https://magicbroccoli.de/tags/xmpp/" class="badge badge-primary">
        xmpp
        </a>
    
  </p>
</div>




</div>

      </div>
  </div>
</div>
      <footer class="footer">
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-md-9">
        <p class="text-xs-center m-a-0 p-a-0">
          &copy; 2017 All rights reserved.
        </p>
        
        <p class="text-xs-center  m-a-0 p-a-0">
            
          <span class="p-l-1 p-r-1">
                <a href="https://magicbroccoli.de/impressum/">Impressum</a>
              </span>
              &middot; 
          <span class="p-l-1 p-r-1">
                <a href="https://magicbroccoli.de/termsofuse/">Terms of Use</a>
              </span>
              &middot; 
          <span class="p-l-1 p-r-1">
                <a href="https://magicbroccoli.de/datenschutz/">Privacy Policy</a>
              </span>
                
        </p>
        
      </div>
    </div>
  </div>
</footer>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>

<script src="https://magicbroccoli.de/assets/js/highlight.pack.js"></script>

<script>
  hljs.initHighlightingOnLoad();
</script>








<link rel="stylesheet" type="text/css" media="screen" href="https://cdn.conversejs.org/css/converse.min.css">
<script>
  if (screen && screen.width > 960) {
    document.write('<script type="text\/javascript" src="https://cdn.conversejs.org/dist/converse.min.js"><\/script>');
  }
</script>
<script>
  converse.initialize({
    allow_chat_pending_contacts: true,
    allow_non_roster_messaging: true,
    allow_registration: false,
    bosh_service_url: 'https://magicbroccoli.de/http-bind',
    csi_waiting_time: 25,
    domain_placeholder: 'magicbroccoli.de',
    default_domain: 'magicbroccoli.de',
    message_carbons: true,
    muc_domain: 'conference.magicbroccoli.de',
    providers_link: 'https://magicbroccoli.de/xmpp',
    registration_domain: 'magicbroccoli.de',
    roster_groups: true,
    show_controlbox_by_default: true,
    show_send_button: true,
  });
</script>

  </body>
</html>

